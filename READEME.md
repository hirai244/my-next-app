# 🌾 AgriMatch

人手不足に悩む農家と、農業現場での実務経験を求める学生をつなぐマッチングプラットフォーム。

## 📖 概要

私は農学部に所属しており、農業現場の深刻な人手不足と、現場を知りたい学生の機会不足という二つに課題を感じていました。
既存のインターン制度は場所や枠の制限が厳しく、もっと手軽に地域で繋がれる仕組みが必要だと考え、自身のプログラミング学習のアウトプットとして開発を決意しました。

## 🚀 デモ

**URL:** https://my-next-app-blush-five.vercel.app/

## 🛠 使用技術 (Tech Stack)

- **Frontend:** Next.js 15 (App Router), React, TypeScript
- **Backend:** Next.js Server Actions, Supabase (Database, Auth, Storage)
- **Styling:** Tailwind CSS, shadcn/ui
- **Infrastructure:** Vercel
- **Form:** React Hook Form, Zod

## ✨ 主な機能

- **ユーザー管理:** 農家・学生それぞれの属性に応じたプロフィール登録・管理 (Supabase Auth / RLS)
- **募集機能 (農家):**
  - 画像アップロード (Supabase Storage)
  - 募集期間・作業日の設定
  - 募集の作成・編集・削除
- **応募機能 (学生):**
  - 募集一覧の閲覧
  - 応募の辞退機能
- **マッチング管理:**
  - 応募者の一覧確認
  - 採用・不採用のステータス管理

## 💡 こだわった点・技術的挑戦

### 1. 型安全性の徹底

開発初期は型定義が甘く、デプロイ後に予期せぬエラーが発生した経験から、TypeScript と Zod を徹底活用しました。
データベースからの戻り値や URL パラメータの型不一致を防ぐため、厳密な型チェックと変換ロジック（`z.coerce`など）を実装し、堅牢性を高めました。

### 2. Server Actions によるセキュアなデータ処理

Next.js の Server Actions を採用し、クライアント側にデータベースのロジックや機密情報を露出させない設計にしました。
データの取得から更新、画像アップロードまでをサーバーサイドで完結させることで、セキュリティとパフォーマンスを両立させています。

### 3. Supabase RLS (Row Level Security) の活用

「自分の投稿しか編集できない」「認証済みユーザーのみ画像をアップロードできる」といったアクセス制御を、アプリケーションロジックだけでなくデータベースのポリシー（RLS）レベルで実装し、セキュリティを強化しました。

### 4. 複雑なフォームデータの送信

画像ファイルを含むデータ送信において、React Hook Form と Zod を組み合わせつつ、`FormData`形式への適切な変換処理を実装し、スムーズな画像アップロードを実現しました。

## 📂 開発期間

2024 年 9 月下旬 〜 2024 年 12 月 7 日（約 2.5 ヶ月）

## 👨‍💻 著者

- [平井　剛士]
- [hirai244]

## 🚧 今後の展望 (Roadmap)

現在も開発を継続しており、以下の機能追加を予定しています。

- **UX の向上:**
  - データ取得中のスケルトンスクリーン (`loading.tsx`) の実装
  - エラー発生時のユーザーフレンドリーな画面 (`error.tsx`) の実装
- **機能追加:**
  - 画像表示の最適化 (`next/image` への完全移行)
  - ミドルウェアによる厳密なルート保護
  - 農家と学生のダイレクトメッセージ機能
  - マップ機能による募集場所の可視化
  - 報酬の表示
  - 検索機能の実装
  - マップの表示
